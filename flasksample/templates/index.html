<!DOCTYPE html>

<html>
	<head>
		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8"/>
		<meta name="viewport" content="height=1080,width=1920,user-scalable=no"/>
		
		<link rel="stylesheet" href="../static/css/mainpage.css">

		<script type="text/javascript" src="https://svcapi.gigagenie.ai/sdk/v1.0/js/gigagenie.js"></script>
		<script type="text/javascript">
		var apistatus=0;
		var options={};
		var ws;
		var status='NI';
		var appid;
		var containerid;
		var wsstate=0;
		var initstate=0;
		var authcode;

//		function sendTTS(msg) {
//			var options={};
//			options.ttstext = msg;
//			gigagenie.voice.sendTTS(options, function(result_cd, result_msg, extra) {
//					console.log("gigagenie.voice.sendTTS - result_cd: " + result_cd);
//					console.log("gigagenie.voice.sendTTS - result_msg:" + result_msg);
//					console.log("gigagenie.voice.sendTTS - extra:" + JSON.stringify(extra));
//			});
//		};

		function init(){
			options={};
			options.apikey="RTUwMDQwMTl8R0JPWERFVk18MTU3ODQ0Mzk3OTM0MA=="; // api key given from developer portal
			options.keytype="GBOXDEVM"; // 개발자모드를 설정하고 사용하세요.
		        //options.keytype="GBOXCOMM"; // 개발자센터에서 승인이 되어야 사용하실 수 있습니다.

			gigagenie.init(options,function(result_cd,result_msg,extra){
				if(result_cd===200){
					status='IS';
					console.log('Initialize Success');
					//alert("안녕하세요 지니선생님이에요");
					//alert("오늘은 무슨 공부를 할까요?");
					sendTTS("안녕하세요, 지니 선생님이에요");
					sendTTS("오늘은 무슨 공부를 할까요?");
					askTheme();
				}
			});
		};		
		
		gigagenie.voice.onRequestClose=function(){
			options={};
			gigagenie.voice.svcFinished(options,function(result_cd,result_msg,extra){	});
		};
		
		function sendTTS(msg) {
			var	options={};
			options.ttstext = msg;
			gigagenie.voice.sendTTS(options, function(result_cd, result_msg, extra) {
					console.log("gigagenie.voice.sendTTS - result_cd: " + result_cd);
					console.log("gigagenie.voice.sendTTS - result_msg: " + result_msg);
					//console.log("gigagenie.voice.sendTTS - extra: " + JSON.stringify(extra));
			});
		};


		function askTheme(){
			var options={};

			options.voicemsg="테마를 선택 해 주세요"

			gigagenie.voice.getVoiceText(options,function(result_cd,result_msg,theme){
				if(result_cd===200){
					console.log(theme.voicetext);
					//if(parseInt(extra.voicetext)===solution){
					if(theme.voicetext.includes("예절")){
						alert(theme.voicetext+" 모드를 시작합니다.");
						location.href = "/polite_theme";	
					}
					alert(theme.voicetext+" 모드를 시작합니다.");
					//} else {
					//	alert(extra.voicetext+" 틀렸습니다.");
			
					//}
				} else {
					alert("다시해보세요");
				}
				askTheme();
			});
		};

		gigagenie.media.onMuteRequest=function(extra){
			if(extra) console.log("Mute!");
			else console.log("unMute!");
		};
	
		function toPolite(){
			location.href="/polite_theme";
		}
	</script>
	</head>
	<body onload=init()>
		<br><br>
		<center><h1>Genie School!!!!</h1><br>
			<p>지니스쿨 메인 페이지 입니다.</p><br><br><br>
			<br>
			<h2>테마를 골라주세요</h2><br><br><br>
			<input type='image' src="../static/img/polite_img.jpg" class='btn_theme' onclick=toPolite()>
			<input type='image' src="../static/img/career_img.jpg" class='btn_theme'>
			<input type='image' src="../static/img/sec_img.jpg" class='btn_theme'>
		</center>
	</body>
</html>

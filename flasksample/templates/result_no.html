<html>
	<head>

		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8"/>
		<meta name="viewport" content="height=1080,width=1920,user-scalable=no"/>

		<link rel="stylesheet" href="../static/css/mainpage.css">

		<script type="text/javascript" src="https://svcapi.gigagenie.ai/sdk/v1.0/js/gigagenie.js"></script>

		<title>Genie School KT Project</title>

		<script type="text/javascript">
		var apistatus=0;
		var options={};
		var ws;
		var status='NI';
		var appid;
		var containerid;
		var wsstate=0;
		var initstate=0;
		var authcode;

		function init() {

			//sendTTS("안녕하세요 ");


			options = {};
			options.apikey = "RTUwMDQwMTl8R0JPWERFVk18MTU3ODQ0Mzk3OTM0MA==";
			options.keytype="GBOXDEVM"; // 개발자모드를 설정하고 사용하세요.
			gigagenie.init(options, function(result_cd, result_msg, extra) {
				if (result_cd === 200) {
					console.log("initialize success, appid:" + extra.appid);

					//안내 TTS
					sendTTS("안녕하세요 지니쌤이에요!");
					//location.href = '/greeting';

				}
			});
		};

		function initGreet() {


			options = {};
			options.apikey = "RTUwMDQwMTl8R0JPWERFVk18MTU3ODQ0Mzk3OTM0MA==";
			options.keytype="GBOXDEVM";
			gigagenie.init(options, function(result_cd, result_msg, extra) {
					if(result_cd === 200) {
						console.log("Result no");
						sendTTS("다시해봐요~~");
					}
				});
		};


		function sendTTS(tts) {
			options = {};
			options.ttstext = tts;
			gigagenie.voice.sendTTS(options, function(result_cd, result_msg, extra) {
					console.log("gigagenie.voice.sendTTS - result_cd:" + result_cd);
					console.log("gigagenie.voice.sendTTS - result_msg:" + result_msg);
					console.log("gigagenie.voice.sendTTS - extra:" + JSON.stringify(extra));					});
		};

		gigagenie.voice.onRequestClose = function() {
			console.log("close event received");
			alert("종료요청받음");
			requestclose();
		};
		function requestclose() {
			console.log("request close");
			options={};
			gigagenie.voice.svcFinished(options, function(result_cd, result_msg, extra) {
					console.log("svcFinished");
					if(result_cd === 200) {
						console.log("service finish success");
						}
						;
					});
		};

		</script>
		</head>
		<body onload="init();">
			<!--
			gif 혹은 그림으로 꾸미기.
			이후 테마로 돌아갈지, 아니면 그냥 종료페이지에 머무를지 선택 필요.
			같은테마 다시하기 기능은 구상이 안됨,...
			1. 애초에 result No 페이지로 오지않고 Repeat을 걸거나,
			2. no일경우 이전 streaming 단계에서 계속 Theme이름을 변수로 넘겨주거나.
			(뇌피셜, 아마가능하지만 시간좀 걸릴듯)
			-->
			<h1>떙!!</h1>

		</body>
	</html>